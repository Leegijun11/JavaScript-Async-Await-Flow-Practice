<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        body {
            background-color: #111;
            color: white;
            font-size: 24px;
            font-family: sans-serif;
            text-align: center; 
        }
        #output {
            margin-top: 50px;
            line-height: 1.8;            
        }
    </style>
</head>
<body>
    <div id ="output"></div>
    <script>
        let r ;
        let r1 ;
        let n = prompt("몇 학년이야? (1,2,3)");
        async function subject(n) {
            return new Promise((resolve)=>{
                setTimeout(()=>{
                    if(n == 1){
                        document.getElementById("output").innerHTML += "너 1학년이야? 동생이네<br><br>"
                        resolve("1학년")
                    }
                    else if (n == 2){
                        document.getElementById("output").innerHTML += "너 2학년이야? 반갑다<br><br>"
                        resolve("2학년")
                    }
                    else if (n == 3){
                        document.getElementById("output").innerHTML += "너 3학년이야? 형이네<br><br>"
                        resolve("3학년")
                    }
                    else {
                        document.getElementById("output").innerHTML += "입력을 잘못했어"
                    }
                },2000)
                }
            )
        }

        async function name() {
            r = await subject(n);
            return new Promise((resolve)=>{
                setTimeout(()=>{
                    let n = prompt("이름은 뭐야?");
                    resolve(n);
                },2000)
            })
            
        }

        async function market() {
            r1 = await name();
            return new Promise((resolve)=>{
                setTimeout(()=>{
                    if(r=="1학년"){
                        document.getElementById("output").innerHTML += r1 + "아, 형이 빵사줄게 매점가자<br><br>"
                    }
                    else if (r =="2학년"){
                        document.getElementById("output").innerHTML += r1 + "아, 친구가 빵사줄게 매점가자<br><br>"
                    }          
                    else if (r == "3학년"){
                        document.getElementById("output").innerHTML += r1 + "아, 동생이 빵사줄게 매점가자<br><br>"
                    }
                    resolve("go")
                },2000)
            })
        }

        async function ok() {
            let r2 = await market();
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{
                        let n = confirm("매점에 가시겠습니까?")
                        if(n==true){
                            document.getElementById("output").innerHTML += "그래 매점 가자"+ "<br><br>"
                            resolve(confirm("라면을 먹을거면 예, 김밥을 먹을거면 아니오를 선택하세요"))
                        }
                        else {                 
                            document.getElementById("output").innerHTML += "매점은 왜 안가?"+ "<br><br>"
                            reject(confirm("아프면 예, 배부르면 아니오를 선택하세요"))
                        }
                    
                },2000)
            });
        }

        ok()
        .then((value)=>{
            setTimeout(()=>{
                if(value == true){
                document.getElementById("output").innerHTML += "라면? 골라보자<br><br>"
                ramen();
                }
                else {
                document.getElementById("output").innerHTML += "김밥? 골라보자<br><br>"
                gimbab();
                }
            },2000)
        })
        .catch((value)=>{
            setTimeout(()=>{
                if(value == true){
                document.getElementById("output").innerHTML += "아 아프구나 쉬어<br><br>"                
                }
                else {
                document.getElementById("output").innerHTML += "아 밥먹었구나 쉬어<br><br>"
                }
            },2000)
        })

        function menu() {
            return new Promise((resolve)=>{
                    resolve("참깨라면이 땡기네<br>")

            })
        }
        function menu2(par) {
            return new Promise((resolve)=>{
                    resolve(`${par} 라면엔 단무지가 필수지` +"<br>" )
            })
        }
        function menu3(par) {
            return new Promise((resolve)=>{
                    resolve(`${par} 음료수도 하나 마시자` +"<br>")
            })
        }

        async function ramen() {
            const k1 = await menu();
            const k2 = await menu2(k1);
            const k3 = await menu3(k2);
            setTimeout(()=>{
                document.getElementById("output").innerHTML += k3;
            },2000)
        }

        function menu4() {
            return new Promise((resolve)=>{
                    resolve("참치김밥이 땡기네<br>")

            })
        }
        function menu5(par) {
            return new Promise((resolve)=>{
                    resolve(`${par} 김밥엔 김치가 필수지` +"<br>" )
            })
        }
        function menu6(par) {
            return new Promise((resolve)=>{
                    resolve(`${par} 물도 하나 마시자` +"<br>")
            })
        }

        async function gimbab() {
            const k1 = await menu4();
            const k2 = await menu5(k1);
            const k3 = await menu6(k2);
            setTimeout(()=>{
            document.getElementById("output").innerHTML += k3;
            },2000)
        }        
    </script>    
</body>
</html>